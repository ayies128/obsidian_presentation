# 🕷️ デモ: Webスクレイピング

## 🤖 Claude Code でスクレイピングツールを作成

---

## 📋 シナリオ

BUYMAの商品一覧をスクレイピングしてCSV出力する
https://www.buyma.com/r/-C3260/

---

## 💬 Step 1: Claude Code に依頼

```
BUYMAの商品一覧ページから
商品名、ブランド、価格、URLを取得して
CSVで出力するスクリプトを作って
```

---

## ⚡ Step 2: 自動で環境構築

Claude Code が自動で実行：

1. 📦 `package.json` 作成
2. 🔧 `puppeteer` インストール
3. 📝 スクレイピングスクリプト作成

---

## 📂 生成されるコード構成

```
scripts/
├── package.json
├── scrape-buyma.ts
└── buyma_products_2025-12-04.csv  ← 📊 出力
```

---

## 🔬 技術的なポイント

### なぜ Puppeteer？

| 方法 | 特徴 |
|------|------|
| 📄 **fetch + cheerio** | 静的HTML向け、軽量 |
| 🎭 **Puppeteer** | JS実行が必要なサイト向け |

BUYMAは**JavaScript**で商品を動的に読み込むため、Puppeteerを使用

---

## ▶️ 実行デモ

```bash
$ npm run scrape

🕷️ BUYMAスクレイピング開始...
🌐 ブラウザを起動中...
🔍 80件の商品リンクを検出
📦 各商品の詳細を取得中...
⏳ 30/30件処理中...

✅ 30件の商品を取得しました
📁 CSVファイルを出力しました: buyma_products_2025-12-04.csv
```

---

## 📊 出力されるCSV

```csv
商品名,ブランド,価格,URL,画像URL
"★SATUR★Waffle Henry Neck T-shirt","SATUR","¥8,900","https://..."
"【Thug Club】Basic Sleeve◆ 長袖","Thug Club","¥15,980","https://..."
"【STUSSY】Basic Thermal","STUSSY","¥18,900","https://..."
```

---

## 💪 Claude Code の強み

### 1️⃣ 試行錯誤を自動化

```
最初の実装 → 動かない → セレクタ修正 → 再実行
```

この**🔄 デバッグサイクルを自動**でやってくれる

---

### 2️⃣ サイト構造の変化に対応

```
「商品が取得できなくなった」😰
→ Claude Code に修正依頼 💬
→ 新しいセレクタで再実装 ✨
```

---

### 3️⃣ 機能追加も簡単

```
「ページネーションに対応して」📄
「価格でソートして」📈
「Excelで出力して」📊
```

💬 自然言語で機能追加できる

---

## ⚠️ 注意点

### 📜 スクレイピングのルール

- 🤖 **robots.txt** を確認する
- 📋 **利用規約** を確認する
- ⏱️ **レート制限** を守る（連続アクセスしすぎない）
- 💼 **商用利用** は特に注意

---

## 💡 活用例

| 用途 | 説明 |
|------|------|
| 💰 **価格調査** | 競合商品の価格をCSVで管理 |
| 📦 **在庫監視** | 定期実行で在庫変動を追跡 |
| 📈 **データ分析** | 市場トレンドの把握 |

---

## 🎯 まとめ

- 💬 Claude Code に「〇〇をスクレイピングして」と言うだけ
- ⚡ **環境構築からデバッグまで自動**
- 🔧 **サイト構造が変わっても修正依頼するだけ**

> 🎉 プログラミング知識なしでもデータ収集が可能に！

---

## 🔗 関連スライド

- 前へ: [[09_demo_nextjs_lp|デモ: Next.js LP作成]]
- 次へ: [[11_rules|運用ルール]]
